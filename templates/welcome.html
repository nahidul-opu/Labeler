{% extends 'layout.html' %}
{% block content %}
<section>
  <h2>ğŸ“‚ Upload or Select a File</h2>
  <p class="lead">Upload a new dataset or continue with one you've used before.</p>

  <article style="max-width:600px; margin:auto; padding:2rem; border:1px solid #e2e8f0; border-radius:12px; background:white; box-shadow:0 2px 8px rgba(0,0,0,0.05);">
    <form action="{{ url_for('upload') }}" method="post" enctype="multipart/form-data">
      <label for="file"><strong>Choose a file to upload</strong></label>
      <input type="file" id="file" name="file" required style="margin-bottom:1rem;">
      <button type="submit" class="contrast" style="width:100%; font-weight:600;">â¬† Upload File</button>
    </form>
  </article>
</section>

<hr style="margin:2rem 0;">

<section>
  <h3>ğŸ—ƒï¸ Previously Uploaded Files</h3>

  {% if files %}
  <div class="scroll">
    <table role="grid">
      <thead>
        <tr>
          <th>File Name</th>
          <th>Size</th>
          <th>Modified</th>
          <th colspan="2" style="text-align:center;">Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for f in files %}
        <tr>
          <td class="mono">{{ f.name }}</td>
          <td>{{ (f.size / 1024) | round(1) }} KB</td>
          <td>{{ f.mtime.strftime('%Y-%m-%d %H:%M') }}</td>
          <td>
            <a href="{{ url_for('select_file', fname=f.name) }}" role="button" class="secondary small">Select</a>
          </td>
          <td>
            <a href="{{ url_for('download_file', fname=f.name) }}" role="button" class="outline small">Download</a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
  <p>No files uploaded yet. Start by uploading one above ğŸ‘†</p>
  {% endif %}
</section>

{% endblock %}
